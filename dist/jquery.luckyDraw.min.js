!function(t,i){"use strict";var s=function(t){this.timer,this.defaults={id:"lottery",index:-1,count:0,speed:20,times:0,cycle:60,prize:0,beforeSend:i.noop,success:i.noop},this.opts=i.extend({},this.defaults,t),this.initialization()};s.prototype={constructor:s,init:function(t){var s=i("#"+t),e=s.find(".lottery-unit");e.length>0&&(this.opts.obj=s,this.opts.count=e.length,s.find(".lottery-unit-"+this.opts.index).addClass("active"))},_initRoll:function(){var t=this.opts.count,s=this.opts.index;return i(".lottery-unit-"+s).removeClass("active"),(s+=1)>t-1&&(s=0),i(".lottery-unit-"+s).addClass("active"),this.opts.index=s,!1},stop:function(t){return this.opts.prize=t,!1},luckyDrawRoll:function(){if(this.opts.times+=1,this._initRoll(),this.opts.times>this.opts.cycle+10&&this.opts.prize==this.opts.index)clearTimeout(this.opts.timer),t.isClick=!1,this.opts.success();else{this.opts.times<this.opts.cycle?this.opts.speed-=10:this.opts.times>this.opts.cycle+10&&(0==this.opts.prize&&7==this.opts.index||this.opts.prize==this.opts.index+1)?this.opts.speed+=110:this.opts.speed+=20,this.opts.speed<40&&(this.opts.speed=40);var i=this;this.opts.timer=setTimeout(function(){i.luckyDrawRoll()},this.opts.speed)}return!1},initialization:function(){this.opts.beforeSend(),this.init(this.opts.id),this.luckyDrawRoll()}},t.luckyDraw=s,i.fn.luckyDraw=function(i){return t.isClick=!1,this.click(function(){if(isClick)return!1;t.isClick=!0,new s(i)}),this}}(this,jQuery);